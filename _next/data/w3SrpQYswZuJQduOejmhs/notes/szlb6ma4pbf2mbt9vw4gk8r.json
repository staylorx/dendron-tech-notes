{"pageProps":{"note":{"id":"szlb6ma4pbf2mbt9vw4gk8r","title":"Mirrors","desc":"","updated":1680539925761,"created":1658775728845,"custom":{},"fname":"tools.nexus.mirrors","type":"note","vault":{"fsPath":"notes"},"contentHash":"cdb654b18ba42c0b10b84c05840aaeac","links":[{"type":"wiki","from":{"fname":"tools.nexus.mirrors","id":"szlb6ma4pbf2mbt9vw4gk8r","vaultName":"notes"},"value":"assets\\files\\cache_images.sh","alias":"assets\\files\\cache_images.sh","position":{"start":{"line":125,"column":48,"offset":2848},"end":{"line":125,"column":80,"offset":2880},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"assets\\files\\cache_images.sh"}},{"from":{"fname":"tools.kubernetes.rke2.install","vaultName":"notes"},"type":"backlink","position":{"start":{"line":75,"column":203,"offset":1690},"end":{"line":75,"column":234,"offset":1721},"indent":[]},"value":"tools.nexus.mirrors","alias":"Mirrors"}],"anchors":{"mirror-maven-repos-for-gradle":{"type":"header","text":"Mirror Maven repos for Gradle","value":"mirror-maven-repos-for-gradle","line":8,"column":0,"depth":2},"mirror-maven-repos-for-maven-pomxml":{"type":"header","text":"Mirror Maven repos for Maven (pom.xml)","value":"mirror-maven-repos-for-maven-pomxml","line":34,"column":0,"depth":2},"mirror-pypi-for-instance":{"type":"header","text":"Mirror PyPi, for instance","value":"mirror-pypi-for-instance","line":78,"column":0,"depth":2},"local-registry-conf-for-podman-containers-folder":{"type":"header","text":"local registry conf for podman containers folder","value":"local-registry-conf-for-podman-containers-folder","line":90,"column":0,"depth":2},"docker-desktop-on-windows":{"type":"header","text":"Docker desktop on Windows","value":"docker-desktop-on-windows","line":106,"column":0,"depth":2}},"children":[],"parent":"hgpdr8bnhz1fba3yfa3bm1i","data":{}},"body":"<h1 id=\"mirrors\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#mirrors\"></a>Mirrors</h1>\n<h2 id=\"mirror-maven-repos-for-gradle\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#mirror-maven-repos-for-gradle\"></a>Mirror Maven repos for Gradle</h2>\n<p>In the <code>$USERHOME/.gradle/init.gradle</code> file,</p>\n<pre><code>allprojects {\n    buildscript {\n        repositories {\n            mavenLocal()\n            maven { \n                url \"http://192.168.1.11:8088/repository/maven-public/\" \n                allowInsecureProtocol = true\n            }\n        }\n    }\n\n    repositories {\n        mavenLocal()\n        maven { \n            url \"http://192.168.1.11:8088/repository/maven-public/\" \n            allowInsecureProtocol = true\n        }\n    }\n}\n</code></pre>\n<h2 id=\"mirror-maven-repos-for-maven-pomxml\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#mirror-maven-repos-for-maven-pomxml\"></a>Mirror Maven repos for Maven (pom.xml)</h2>\n<p>In the <code>$USERHOME/.m2/settings.xml</code> file,</p>\n<pre><code>&#x3C;settings>\n  &#x3C;mirrors>\n    &#x3C;mirror>\n      &#x3C;!--This sends everything else to /public -->\n      &#x3C;id>nexus&#x3C;/id>\n      &#x3C;mirrorOf>*&#x3C;/mirrorOf>\n      &#x3C;url>http://192.168.1.11:8088/repository/maven-public/&#x3C;/url>\n    &#x3C;/mirror>\n  &#x3C;/mirrors>\n  &#x3C;profiles>\n    &#x3C;profile>\n      &#x3C;id>nexus&#x3C;/id>\n      &#x3C;!--Enable snapshots for the built in central repo to direct -->\n      &#x3C;!--all requests to nexus via the mirror -->\n      &#x3C;repositories>\n        &#x3C;repository>\n          &#x3C;id>central&#x3C;/id>\n          &#x3C;url>http://central&#x3C;/url>\n          &#x3C;releases>&#x3C;enabled>true&#x3C;/enabled>&#x3C;/releases>\n          &#x3C;snapshots>&#x3C;enabled>true&#x3C;/enabled>&#x3C;/snapshots>\n        &#x3C;/repository>\n      &#x3C;/repositories>\n     &#x3C;pluginRepositories>\n        &#x3C;pluginRepository>\n          &#x3C;id>central&#x3C;/id>\n          &#x3C;url>http://central&#x3C;/url>\n          &#x3C;releases>&#x3C;enabled>true&#x3C;/enabled>&#x3C;/releases>\n          &#x3C;snapshots>&#x3C;enabled>true&#x3C;/enabled>&#x3C;/snapshots>\n        &#x3C;/pluginRepository>\n      &#x3C;/pluginRepositories>\n    &#x3C;/profile>\n  &#x3C;/profiles>\n  &#x3C;activeProfiles>\n    &#x3C;!--make the profile active all the time -->\n    &#x3C;activeProfile>nexus&#x3C;/activeProfile>\n  &#x3C;/activeProfiles>\n&#x3C;/settings>\n</code></pre>\n<h2 id=\"mirror-pypi-for-instance\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#mirror-pypi-for-instance\"></a>Mirror PyPi, for instance</h2>\n<p>Create the following in a <code>pip.ini</code> or <code>pip.conf</code> file. In Conda—where I tend to use this the most—place the file in each environment folder and it works great.</p>\n<pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">global</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">use-mirrors</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">true</span>\n<span class=\"token key attr-name\">mirrors</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">http://192.168.1.11:8088/repository/pypi/</span>\n<span class=\"token key attr-name\">index-url</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">http://192.168.1.11:8088/repository/pypi/simple/</span>\n<span class=\"token key attr-name\">trusted-host</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">192.168.1.11</span>\n</code></pre>\n<h2 id=\"local-registry-conf-for-podman-containers-folder\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#local-registry-conf-for-podman-containers-folder\"></a>local registry conf for podman containers folder</h2>\n<p><em>Note the 8880 has been configured as a docker repo, not a normal maven, npm, or yum repo. Those are on 8088</em></p>\n<pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token comment\">#/etc/containers/registries.conf</span>\n\n<span class=\"token comment\">#...</span>\n<span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">registries.search</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">registries</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">['192.168.1.11:8880']</span>\n\n<span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">registries.insecure</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">registries</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">['192.168.1.11:8880']</span>\n<span class=\"token comment\">#...</span>\n</code></pre>\n<h2 id=\"docker-desktop-on-windows\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#docker-desktop-on-windows\"></a>Docker desktop on Windows</h2>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"builder\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"gc\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"defaultKeepStorage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"20GB\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"experimental\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"features\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"buildkit\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"insecure-registries\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"192.168.1.11\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"max-concurrent-downloads\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"registry-mirrors\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"http://192.168.1.11:8880\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Once this is configured, I run a script (here: <a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">assets\\files\\cache_images.sh (Private)</a>) from time to time to ensure I have the latest versions in the proxy. </p>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/dendron-tech-notes/notes/popbcjy9dqfazcfamrq6wfa\">Install</a></li>\n</ul>","noteIndex":{"id":"mxgc4uwkaggbr33skdyr3er","title":"Root","desc":"","updated":1658781980025,"created":1658781841009,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"notes"},"contentHash":"cd32b46dedcf30d08822d76b765cfad7","links":[],"anchors":{"welcome-to-tech-notes":{"type":"header","text":"Welcome to Tech Notes","value":"welcome-to-tech-notes","line":7,"column":0,"depth":1}},"children":["9mb2ancyhiisd1t0ri8enmf","k11gwwa49rz1xy90k5ujoia"],"parent":null,"data":{},"body":"# Welcome to Tech Notes\n\nThis was originally stood up to collect gists from github, snippets from gitlab, and any other bits and bobbles spread across the SVCs of my business."},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"notes"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enableHandlebarTemplates":true,"enableSmartRefs":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"assetsPrefix":"/dendron-tech-notes","siteUrl":"https://staylorx.github.io","enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":true,"siteRootDir":"docs","seo":{"title":"Dendron Tech Notes","description":"Collection of notes related to technology"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enablePrettyLinks":true,"duplicateNoteBehavior":{"action":"useVault","payload":["notes"]},"enableTaskNotes":true,"siteFaviconPath":"favicon.ico","siteIndex":"root","searchMode":"lookup"}}},"__N_SSG":true}